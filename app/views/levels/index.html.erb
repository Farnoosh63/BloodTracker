<h1>Glucose Levels</h1>
<h3>This is your blood glucose level app!</h3>

<h4> Today is: <%= today = Time.now.strftime("%Y-%m-%d") %></h4>

<% if Level.all.where(date: today).count < 4 %>
  <h5><%= link_to 'New Entry', new_level_path %></h5>
  <% else %>
  <p> You only have to enter blood level up to four times per day</p>
<% end %>



<h3>Daily Reports</h3>
<h5> This report shows the current day you search for. </h5>
<%= form_tag("/levels", method: "get") do %>
  <p>
    <%= label_tag(:q, "Search for daily report:") %>
    <%= date_field_tag :search_daily, params[:search_daily]%>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>
<table>
<% @levels1.each do |level| %>
  <tr>
    <td><%= link_to level.number, level_path(level) %></td>
    <td><%= level.date.strftime("%Y-%m-%d")%></td>
  </tr>
<% end %>
  <p> average is: <%= @levels1.average(:number) %></p>
  <p> minimum is: <%= @levels1.maximum(:number) %></p>
  <p> maximum is: <%= @levels1.minimum(:number) %></p>
</table>



<h3> Month To Date Reports</h3>
<h5> This report shows the complete current month up to the end of the day you search for. </h5>
<%= form_tag("/levels", method: "get") do %>
  <p>
    <%= label_tag(:q, "Search for Month to Date report:") %>
    <%= date_field_tag :search_month_to_date, params[:search_month_to_date]%>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>
<table>
<% @levels2.each do |level| %>
  <tr>
    <td><%= link_to level.number, level_path(level) %></td>
    <td><%= level.date.strftime("%Y-%m-%d")%></td>
  </tr>
<% end %>
  <p> average is: <%= @levels2.average(:number) %></p>
  <p> minimum is: <%= @levels2.maximum(:number) %></p>
  <p> maximum is: <%= @levels2.minimum(:number) %></p>
</table>



<h3> Monthly Reports</h3>
<h5> This report shows the complete previous month of the day you search for. </h5>
<%= form_tag("/levels", method: "get") do %>
  <p>
    <%= label_tag(:q, "Search for monthly report:") %>
    <%= date_field_tag :search_monthly, params[:search_monthly]%>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>
<table>
<% @levels3.each do |level| %>
  <tr>
    <td><%= link_to level.number, level_path(level) %></td>
    <td><%= level.date.strftime("%Y-%m-%d")%></td>
  </tr>
<% end %>
  <p> average is: <%= @levels3.average(:number) %></p>
  <p> minimum is: <%= @levels3.maximum(:number) %></p>
  <p> maximum is: <%= @levels3.minimum(:number) %></p>
</table>
